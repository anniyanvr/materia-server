[
	{
		"undo": {
			"type": "create_entity",
			"table": "user",
			"value": {
				"name": "user",
				"fields": [
					{
						"name": "id",
						"type": "number",
						"primary": true,
						"unique": true,
						"required": true,
						"read": true,
						"write": true,
						"default": false,
						"autoIncrement": true
					},
					{
						"name": "email",
						"type": "text",
						"primary": false,
						"unique": true,
						"required": true,
						"read": true,
						"write": true,
						"default": false
					},
					{
						"name": "pass",
						"type": "text",
						"primary": false,
						"unique": false,
						"required": true,
						"read": true,
						"write": true,
						"default": false
					}
				],
				"relations": [
					{
						"type": "hasMany",
						"reference": {
							"entity": "user_permission",
							"field": "id_user"
						},
						"entity": "user"
					}
				],
				"queries": [
					{
						"id": "auth",
						"type": "custom",
						"params": [],
						"opts": {
							"file": "addons/materia-basic-auth/query/auth"
						}
					}
				]
			}
		},
		"redo": {
			"type": "delete_entity",
			"table": "user"
		}
	},
	{
		"undo": {
			"type": "create_entity",
			"table": "user_role",
			"value": {
				"name": "user_role",
				"fields": [
					{
						"name": "role",
						"type": "text",
						"primary": true,
						"unique": true,
						"required": true,
						"read": true,
						"write": true,
						"default": false
					},
					{
						"name": "description",
						"type": "text",
						"primary": false,
						"unique": false,
						"required": false,
						"read": true,
						"write": true,
						"default": false
					}
				],
				"relations": [
					{
						"type": "hasMany",
						"reference": {
							"entity": "user_permission",
							"field": "role"
						},
						"entity": "user_role"
					}
				]
			}
		},
		"redo": {
			"type": "delete_entity",
			"table": "user_role"
		}
	},
	{
		"undo": {
			"type": "create_entity",
			"table": "user_permission",
			"value": {
				"name": "user_permission",
				"fields": [
					{
						"name": "role",
						"type": "text",
						"primary": false,
						"unique": true,
						"required": true,
						"read": true,
						"write": true,
						"default": false
					}
				],
				"relations": [
					{
						"field": "role",
						"type": "belongsTo",
						"reference": {
							"entity": "user_role",
							"field": "role"
						},
						"entity": "user_permission"
					}
				],
				"queries": [
					{
						"id": "getUserRoles",
						"type": "findAll",
						"params": [
							{
								"name": "id_user",
								"type": "number",
								"required": true
							}
						],
						"opts": {
							"conditions": [
								{
									"name": "id_user",
									"operator": "=",
									"value": "="
								}
							]
						}
					},
					{
						"id": "getRoleUsers",
						"type": "findAll",
						"params": [
							{
								"name": "role",
								"type": "text",
								"required": true
							}
						],
						"opts": {
							"conditions": [
								{
									"name": "role",
									"operator": "=",
									"value": "="
								}
							]
						}
					}
				]
			}
		},
		"redo": {
			"type": "delete_entity",
			"table": "user_permission"
		}
	},
	{
		"undo": {
			"type": "delete_field",
			"table": "event",
			"value": "testField"
		},
		"redo": {
			"type": "create_field",
			"table": "event",
			"value": {
				"name": "testField",
				"type": "text",
				"primary": false,
				"unique": false,
				"required": false,
				"read": true,
				"write": true,
				"default": false
			},
			"position": 5
		}
	},
	{
		"undo": {
			"type": "create_field",
			"table": "event",
			"value": {
				"name": "title",
				"type": "text",
				"primary": false,
				"unique": false,
				"required": true,
				"read": true,
				"write": true,
				"default": false
			},
			"position": 1
		},
		"redo": {
			"type": "delete_field",
			"table": "event",
			"value": "title"
		}
	}
]